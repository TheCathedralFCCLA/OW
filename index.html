<!DOCTYPE html>
<html>
<head>
    <title>Opening Latest PDF...</title>
    <style>
        body { font-family: -apple-system, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; color: #666; }
    </style>
</head>
<body>
    <div>Loading latest report...</div>

    <script>
        const USER = 'TheCathedralFCCLA';
        const REPO = 'OW';

        async function redirectToLatestPDF() {
            try {
                const response = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/`);
                const files = await response.json();

                // Find the first file ending in .pdf
                const pdfFile = files.find(file => file.name.toLowerCase().endsWith('.pdf'));

                if (pdfFile) {
                    // This is the magic part: 
                    // We redirect the browser directly to the GitHub Pages version of the file.
                    // This ensures Safari treats it as a native PDF.
                    const pdfUrl = `https://${USER}.github.io/${REPO}/${pdfFile.name}`;
                    window.location.replace(pdfUrl);
                } else {
                    document.body.innerText = 'No PDF file found.';
                }
            } catch (error) {
                document.body.innerText = 'Error loading PDF.';
                console.error(error);
            }
        }

        redirectToLatestPDF();
    </script>
</body>
</html>